<div class="user">
    <div class="togelbar">
        <div class="toglebarcontainer">
            <div class="toglebarcontainer2" *ngFor="let salle of displayedSalle">
                <img [src]="salle.image" alt="{{ salle.name }}" class="img1">
            </div>
            <div>
                <div style="position: absolute;left: 282px;top: 15px;">
                    <input class="in22" type="text" [(ngModel)]="query" (keyup.enter)="search()"
                        placeholder="Enter your search...">
                    <i class='bx bx-search-alt'
                        style="font-size: 19px;line-height: 38px;position: absolute;left: 13px;cursor: pointer;"></i>
                </div>
                <button class="bb2" (click)="toggleDropdown4()" style="position: relative;">
                    <span class="bb2s">{{ countchop }} </span>

                    <div class="ii" style="position: relative;top: 7px;">
                        <i class='bx bx-cart-download' style="font-size: 22px;animation: none;"></i>

                    </div>
                </button>
                <button class="bb2" (click)="toggleDropdown2()" style="position: relative;">
                    <span class="bb2s"> {{ countAcceptedEvents }}</span>

                    <div class="ii" style="position: relative;top: 7px;">
                        <i class='bx bx-bell' style="font-size: 22px;"></i>
                    </div>
                </button>

                <div class="dropdown-menu" *ngIf="showDropdown2" style="right: 228px;    width: 318px ">
                    <!-- Contenu de votre menu déroulant -->
                    <div class="nottit">
                        <div style="width: 222px;">
                            <h6> notification</h6>
                        </div>
                        <div style="padding: 0px 12px;width: 63px;">
                            <a href="" class="dd">Vieux all</a>
                        </div>
                    </div>
                    <div style="display: block;" *ngFor="let event of lastAcceptedEvent">
                        <div class="ev">
                            <div class="im">
                                <img [src]="event.user.image" alt="Image de l'événement" class="ivim">
                            </div>
                            <div>
                                <h6 class="hh6">{{ event.user.username }}</h6>
                                <a href="" style="text-decoration: none;" [routerLink]="['/eventid', event.id]">
                                    <p class="pp">{{ event.nom }}</p>
                                </a>
                                <p class="pp"><i class="fa-regular fa-clock"
                                        style="animation: none;font-size: 12px; "></i>
                                    {{ event.timeAgo }}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="foot">
                        <a href="" style="font-size: 14px ;text-decoration: none;" class="dd"> Vieux more...</a>
                    </div>
                </div>
                <div *ngIf="userInfo" style="display: inline-block;">
                    <img *ngIf="userInfo.image" [src]="userInfo.image" alt="User Image" class="img2">
                </div>
                <div class="b2" *ngIf="userInfo">
                    <button class="bb2" (click)="toggleDropdown()">

                        <p>{{ userInfo.username }}</p>
                        <span style="top: 24px;"><i class="fas fa-angle-down icon2"></i></span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" *ngIf="showDropdown">
                        <!-- Contenu de votre menu déroulant -->
                        <a href="" class="a1" [routerLink]="['/user',userInfo.id]">
                            <i class='bx bx-user'></i>
                            profile</a>
                        <a [routerLink]="['/updateuser',userInfo.id]" class="a1"><i class='bx bx-wrench'></i>my
                            information</a>
                        <a [routerLink]="['/ibm',userInfo.id]" class="a1"><i class='bx bx-dumbbell'></i>my IBM</a>
                    </div>
                </div>
                <button class="b">
                    <i class='bx bx-cog'></i>
                </button>


            </div>
        </div>
    </div>

</div>
<div style="display: flex;">
    <div style="position: relative;top: 70px;">
        <app-baradus></app-baradus>
    </div>
    <div class="ss" *ngIf="userInfo">
        <div class="ss1">
            <h4 class="h4h">PRODUCT DETAIL</h4>
            <div style="display: flex;">
                <p class="pp4">PRODUCT DETAIL <span style="margin-left: 8px;">/</span></p>
                <p class="pp5">Profile</p>
            </div>
        </div>
        <div style=" padding: 20px;background-color: #2a3042;width: 1166px;border-radius: 5px;">
            <div class="cardchop" *ngIf="chop">
                <div class="cardchow1">
                    <div class="cardchop2" [ngClass]="{'red-background': clickedImageIndex === 0}">
                        <img [src]="chop.imageslid2" alt="" (click)="setFullSizeImage(chop.imageslid2, 0)"
                            style="width: 40px;height: 40px;cursor: pointer;">
                    </div>
                    <div class="cardchop2" [ngClass]="{'red-background': clickedImageIndex === 1}">
                        <img [src]="chop.imageslid1" alt="" (click)="setFullSizeImage(chop.imageslid1, 1)"
                            style="width: 40px;height: 40px;cursor: pointer;">
                    </div>
                    <div class="cardchop2" [ngClass]="{'red-background': clickedImageIndex === 2}">
                        <img [src]="chop.imageslid3" alt="" (click)="setFullSizeImage(chop.imageslid3, 2)"
                            style="width: 40px;height: 40px;cursor: pointer;">
                    </div>
                    <div class="cardchop2" [ngClass]="{'red-background': clickedImageIndex === 3}">
                        <img [src]="chop.imageslid4" alt="" (click)="setFullSizeImage(chop.imageslid4, 3)"
                            style="width: 40px;height: 40px;cursor: pointer;">
                    </div>
                </div>
                <div class="cardchow2">
                    <img [src]="getFullSizeImage()" alt="" style="height: 278px;width: 278px;">
                    <div class="cardd2p">
                        <button (click)="addToCart()">
                            <i class='bx bx-cart-add'></i>
                            Add to Cart
                        </button>
                        <button (click)="addToCartpayment()" style="background-color: #34c38f;"
                            [routerLink]="['/pay2', userInfo.id, chop.id]">
                            <i class='bx bx-shopping-bag'></i>
                            buy naw
                        </button>
                    </div>
                    <div>


                    </div>
                </div>
                <div class="cardchow3">
                    <h5>{{chop.type}}</h5>
                    <h4>{{chop.name}}</h4>
                    <div class="star-rating" style="margin-bottom: 16px;">
                        <span *ngFor="let _ of [].constructor(starRating); let i = index">
                            <i class='bx bx-star' aria-hidden="true" style="color: rgba(241, 180, 76);"></i>
                        </span>
                        <span *ngFor="let _ of [].constructor(5 - starRating); let i = index">
                            <i class='bx bx-star' aria-hidden="true" style="color: #c3cbe4;"></i>
                        </span>
                    </div>
                    <p>( {{revieucount}} Customers Review )</p>
                    <h6>{{chop.persentage}} % OFF</h6>
                    <div class="ppr">
                        <ng-container *ngIf="chop.persentage > 0; else normalPrice">

                            <h5>Price : <del style="color: #c3cbe4;margin-right: 10px;">{{ chop.prix }} DT</del>{{
                                calculatedPrice }} DT </h5>
                        </ng-container>
                        <ng-template #normalPrice>
                            <h5>Price : {{ chop.prix }} DT</h5>
                        </ng-template>
                    </div>

                    <p>Discover our quality products for your fitness! Modern equipment and effective food supplements
                        await you. Join us now to achieve your fitness goals</p>
                    <h4>Add revieux</h4>
                    <form (ngSubmit)="ajouterRevieux()">
                        <div class="form-group">
                            <textarea class="form-control" id="commentaire" name="commentaire"
                                placeholder="Add a review..." [(ngModel)]="commentaire" required></textarea>
                        </div>

                        <button type="submit">Add a review</button>
                    </form>
                </div>
            </div>
            <div class="cardziz" *ngIf="chop">
                <h5>Specifications :</h5>
                <table>
                    <tr>
                        <th>size</th>
                        <td>{{chop.size}}</td>
                    </tr>
                    <tr>
                        <th>colore</th>
                        <td>{{chop.color}}</td>
                    </tr>
                </table>
                <div class="cardrev">
                    <h5>Reviews :</h5>
                    <div *ngFor="let revieux of choprevieux" class="cardrev1">
                        <img [src]="revieux.user.image" alt="Image">
                        <div style="display: block;">
                            <h5 style="font-size: 15px;margin-bottom: 8px;">{{revieux.user.username}}</h5>
                            <p>{{revieux.commentaire}}</p>
                            <div style="display: flex;">
                                <i class='bx bx-calendar-event'></i>
                                <p style="margin-left: 10px;">{{ revieux.addedDate | date:'dd/MMM/yyyy' }}</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div style="margin-top: 25px;" class="derch">
            <h5>Recent product :</h5>
       <div style="display: flex;justify-content: center;" >
        <div *ngFor="let chop of chop2" class="derch2">
            <img [src]="chop.imageslid1" alt="Chop Image">
            <div style="display: block;margin-left: 10px;">
                <a [routerLink]="['/chopdetait', userInfo.id, chop.id]">{{chop.name}}</a>
                <h5 style=" margin-top: 22px;">{{chop.prix}} DTN</h5>
                
            </div>
        </div>
       </div>
         
        </div>
    </div>
    <div *ngIf="searchResults.length > 0" class="bb2b" (click)="toggleDropdown3()">
        <div class="bb21">
            <h1>search result</h1>
        </div>
        <div style="display: flex;" *ngFor="let result of searchResults">

            <img [src]="result.image" alt="Image">
            <div class="evv3">
                <a href="" [routerLink]="['/initlest', userInfo.id, result.id]">{{ result.nom }} </a>
                <a href="" [routerLink]="['/inscriptioncour', userInfo.id, result.id]">{{ result.name }}</a>
                {{ result.username }}
            </div>
        </div>
    </div>
    <div class="dropdown-menu" *ngIf="showDropdown4" style="right: 275px;top: 69px;position: fixed;    width: 318px ">
        <!-- Contenu de votre menu déroulant -->
        <div class="nottit">
            <div style="width: 222px;">
                <h6> notification</h6>
            </div>
            <div style="padding: 0px 12px;width: 63px;">
                <a href="" class="dd">Vieux all</a>
            </div>
        </div>
        <div style="display: block;" *ngFor="let chop of chops">
            <div class="ev">
                <div class="im">
                    <img [src]="chop.imageslid1" alt="Image de l'événement" class="ivim">
                </div>
                <div>
                    <h6 class="hh6">{{ chop.name }}</h6>
                    <a [routerLink]="['/chopdetait', userInfo.id, chop.id]" style="text-decoration: none;">
                        <p class="pp">{{ chop.type }}</p>
                    </a>
                    <p class="pp">
                        {{ chop.prix }}DTN
                        
                    </p>
                </div>
            </div>
        </div>
        <div class="foot">
            <a href="" style="font-size: 14px ;text-decoration: none;" class="dd"> Vieux more...</a>
        </div>
    </div>
</div>

  

<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
